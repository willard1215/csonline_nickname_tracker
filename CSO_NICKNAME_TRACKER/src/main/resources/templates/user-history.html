
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>닉네임 히스토리 - CSO Nickname Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"/>

    <style>
        body { background:#101010; color:#f5f5f5; font-family:system-ui,-apple-system,"Segoe UI",sans-serif; }
        .main-card { background:#161616; border-radius:16px; border:1px solid #262626; padding:20px 22px; margin-top:30px; }
        .badge-sn { font-family:ui-monospace,Consolas,"Courier New",monospace; background:#212121; border:1px solid #333; font-size:0.8rem; }
        .history-item { padding:8px 0; border-bottom:1px solid #252525; }
        .history-item:last-child { border-bottom:none; }
        .empty-text { color:#999; padding:16px 0; text-align:center; }
        .change-arrow { color:#ff8080; font-weight:600; }
    </style>
</head>
<body>

<div class="container mb-5">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8">

            <div class="main-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div>
                        <h4 class="mb-1" th:text="'닉네임 히스토리 - ' + ${nickname}">닉네임 히스토리</h4>
                        <span class="badge rounded-pill badge-sn"
                              th:text="${userKey}">nexonsn</span>
                    </div>
                    <div>
                        <a th:href="@{/getUser(page=0, size=10)}"
                           class="btn btn-sm btn-outline-light">
                            목록으로
                        </a>
                    </div>
                </div>

                <!-- 히스토리 없을 때 -->
                <div th:if="${#lists.isEmpty(histories)}" class="empty-text">
                    저장된 닉네임 변경 이력이 없습니다.
                </div>

                <!-- 히스토리 전체 출력 -->
                <div th:if="${!#lists.isEmpty(histories)}">
                    <div th:each="h, stat : ${histories}" class="history-item">
                        <span class="text-secondary me-2"
                              th:text="${stat.count} + '.'">
                            1.
                        </span>

                        <span th:text="${h.beforeNickname}">old</span>
                        <span class="change-arrow">→</span>
                        <span th:text="${h.afterNickname}">new</span>

                        <!-- changedAt이 있다면 옆에 시간 표시 (없으면 이 span 통째로 지워도 됨) -->
                        <span class="text-secondary ms-2"
                              th:text="${h.changedAt}">
                            2025-12-06T03:15
                        </span>
                    </div>
                </div>

            </div>

        </div>
    </div>
</div>

</body>
</html>
